## B+树

- B+树和**B-Tree一样，一次检索最多需要h-1次I/O（根节点常驻内存），渐进复杂度为O(h)=O(logdN)** ，通过d都很大，所以h很小
- 在B-树基础上，**为叶子结点增加链表指针**，所有关键字都在叶子结点中出现，非叶子节点不会命中。这样每个节点就可以存放更多的记录，树更矮了，I/O操作更少了 
- 所有的叶节点都在同一层，叶子节点之间通过链表相连，这样有利于范围查询
- B+树有2个头指针，一个是树的根节点，一个是最小关键码的叶节点 。所以B+树有两种访问方式，一种通过根节点，一种通过最小关键码节点（如果是范围查询的话，可能是通过根节点找到第一个数，在通过第二种方式找，而B树因为数据分散，所以叶节点之间不能使用指针相连）
- 首先B+树只有叶节点才指向真实数据，这样可以将同一个节点下的数据的物理地址存放在一起，有效的利用了磁盘预读（每次读取数据的时候，都会顺序读取后面一定长度的数据，局部性原理：当一个数据被用到时，其附近的数据也通常会马上被使用）



## B+树增加节点操作

比如一个空的3阶B+树，先插入1，100，1000。形成了一个深度为1的树，之后插入2时，发现1深度的节点已经满了，这样要把100对应的节点抽取出来形成新的节点，而叶节点1，100，1000被拆分成1，100和1000两个叶节点，对应100这个分支节点，这样就形成了深度为2的树，分支节点的关键字只有一个100，对应两个叶节点



## 聚簇索引

所谓聚簇索引，就是指主索引文件和数据文件为同一份文件，聚簇索引主要用在Innodb存储引擎中。在该索引实现方式中B+Tree的叶子节点上的data就是数据本身，key为主键，如果是一般索引的话，data便会指向对应的主索引